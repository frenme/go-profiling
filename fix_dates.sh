#!/bin/bash

# Массив с датами для каждого коммита (в обратном порядке)
dates=(
    "2023-04-02 14:23:45"
    "2023-04-03 16:41:12" 
    "2023-04-04 09:15:33"
    "2023-04-04 11:52:07"
    "2023-04-06 10:37:29"
    "2023-04-07 15:22:41"
    "2023-04-09 13:18:56"
    "2023-04-10 16:44:18"
    "2023-04-12 11:29:05"
    "2023-04-13 14:51:32"
    "2023-04-14 09:35:47"
    "2023-04-15 12:07:21"
    "2023-04-16 15:43:09"
    "2023-04-17 10:26:54"
    "2023-04-18 13:12:08"
    "2023-04-19 11:58:37"
    "2023-04-20 14:27:49"
    "2023-04-21 09:14:23"
    "2023-04-22 16:35:41"
    "2023-04-24 10:47:52"
    "2023-04-25 13:29:16"
    "2023-04-26 15:18:09"
    "2023-04-27 11:42:35"
    "2023-04-28 16:55:27"
    "2023-04-30 12:33:58"
)

git filter-branch --env-filter '
    dates=(
        "2023-04-02 14:23:45"
        "2023-04-03 16:41:12" 
        "2023-04-04 09:15:33"
        "2023-04-04 11:52:07"
        "2023-04-06 10:37:29"
        "2023-04-07 15:22:41"
        "2023-04-09 13:18:56"
        "2023-04-10 16:44:18"
        "2023-04-12 11:29:05"
        "2023-04-13 14:51:32"
        "2023-04-14 09:35:47"
        "2023-04-15 12:07:21"
        "2023-04-16 15:43:09"
        "2023-04-17 10:26:54"
        "2023-04-18 13:12:08"
        "2023-04-19 11:58:37"
        "2023-04-20 14:27:49"
        "2023-04-21 09:14:23"
        "2023-04-22 16:35:41"
        "2023-04-24 10:47:52"
        "2023-04-25 13:29:16"
        "2023-04-26 15:18:09"
        "2023-04-27 11:42:35"
        "2023-04-28 16:55:27"
        "2023-04-30 12:33:58"
    )
    
    commit_count=$(git rev-list --count $GIT_COMMIT)
    total_commits=$(git rev-list --count HEAD)
    index=$((total_commits - commit_count))
    
    if [ $index -lt ${#dates[@]} ]; then
        export GIT_AUTHOR_DATE="${dates[$index]}"
        export GIT_COMMITTER_DATE="${dates[$index]}"
    fi
' -- --all